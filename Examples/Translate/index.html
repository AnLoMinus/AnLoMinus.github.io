<!DOCTYPE html>
<html lang="he">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×—×™×¨×ª ×©×¤×” - Language Selector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            direction: rtl;
            /* ×”×’×“×¨×ª ×›×™×•×•×Ÿ ×”×˜×§×¡×˜ ×œ×¢×‘×¨×™×ª */
        }

        h1 {
            color: #4CAF50;
        }

        p {
            font-size: 18px;
        }

        #languageOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #languageOverlay div {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }

        #language-select {
            width: 300px;
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            margin-top: 10px;
            text-align: right;
        }

        #confirm-language {
            background-color: #4CAF50;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        #translate-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #4CAF50;
            color: white;
            font-size: 30px;
            text-align: center;
            line-height: 50px;
            cursor: pointer;
            z-index: 1001;
            display: none;
            /* × ×¡×ª×¨ ×‘×”×ª×—×œ×” */
        }

        #language-select option {
            padding-left: 40px;
            /* ×¨×™×•×•×— ×›×“×™ ×œ×”×•×¡×™×£ ××§×•× ×œ×“×’×œ */
            background-repeat: no-repeat;
            background-size: 20px;
        }
    </style>
</head>

<body>
    <h1>×‘×¨×•×š ×”×‘× ×œ××ª×¨ ×©×œ×™!</h1>
    <p>×–×”×• ×“×£ ×œ×“×•×’××” ×œ×”××—×©×ª ××¤×©×¨×•×ª ×‘×—×™×¨×ª ×©×¤×” ×¢× ×“×’×œ×™×. ×”×©×ª××© ×‘××™×™×§×•×Ÿ ×”×ª×¨×’×•× ×œ××˜×” ×›×“×™ ×œ×‘×—×•×¨ ××ª ×”×©×¤×” ×©×œ×š.</p>

    <!-- ××™×™×§×•×Ÿ ×ª×¨×’×•× (× ×¡×ª×¨ ×‘×”×ª×—×œ×”) -->
    <div id="translate-icon">ğŸŒ</div>

    <!-- ××œ×× ×˜ × ×¡×ª×¨ ×¢×‘×•×¨ Google Translate -->
    <div id="google_translate_element" style="display:none;"></div>

    <!-- ×—×œ×•×Ÿ ×‘×—×™×¨×ª ×©×¤×” -->
    <div id="languageOverlay">
        <div>
            <h1>×‘×¨×•×š ×”×‘×! ×‘×—×¨ ××ª ×”×©×¤×” ×©×œ×š:</h1>
            <!-- ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª ×©×¤×” ×¢× ×“×’×œ×™× -->
            <select id="language-select">
                <option value="he">×¢×‘×¨×™×ª</option>
                <option value="en">English</option>
                <option value="fr">FranÃ§ais</option>
                <option value="es">EspaÃ±ol</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="zh-CN">ä¸­æ–‡ (ç®€ä½“)</option>
                <option value="de">Deutsch</option>
                <option value="it">Italiano</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ko">í•œêµ­ì–´</option>
                <option value="pt">PortuguÃªs</option>
                <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="tr">TÃ¼rkÃ§e</option>
                <option value="nl">Nederlands</option>
                <option value="sv">Svenska</option>
            </select>
            <br>
            <button id="confirm-language">××™×©×•×¨</button>
        </div>
    </div>

    <!-- ×§×•×“ JavaScript -->
    <script type="text/javascript">
        // ×¤×•× ×§×¦×™×” ×œ×˜×¢×™× ×ª Google Translate
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'he', // ×©×¤×ª ×‘×¨×™×¨×ª ××—×“×œ - ×¢×‘×¨×™×ª
                autoDisplay: false
            }, 'google_translate_element');
        }

        // ×˜×¢×™× ×ª Google Translate Script
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
        document.getElementsByTagName('head')[0].appendChild(script);

        // ×–×™×”×•×™ ×©×¤×ª ×”×“×¤×“×¤×Ÿ ×©×œ ×”××©×ª××©
        function detectBrowserLanguage() {
            var language = (navigator.languages && navigator.languages.length) ? navigator.languages[0] : navigator.language;
            return language.substring(0, 2); // ××—×–×™×¨ ××ª ×§×•×“ ×”×©×¤×” (×œ×“×•×’××”: "en", "fr")
        }

        // ×©××™×¨×ª ×©×¤×” × ×‘×—×¨×ª ×‘-LocalStorage
        function saveLanguageSelection(lang) {
            localStorage.setItem('selectedLanguage', lang);
        }

        // ×©×™× ×•×™ ×”×©×¤×” ×‘×ª×¤×¨×™×˜ Google Translate
        function setLanguage(lang) {
            var selectField = document.querySelector("select.goog-te-combo");
            if (selectField) {
                selectField.value = lang;
                selectField.dispatchEvent(new Event('change'));
            }
        }

        // × ×™×§×•×™ Google Translate ×›×“×™ ×œ×—×–×•×¨ ×œ×¢×‘×¨×™×ª
        function resetToHebrew() {
            var iframe = document.querySelector('iframe.goog-te-banner-frame');
            if (iframe) {
                var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
                var resetButton = innerDoc.querySelector('.goog-te-button');
                if (resetButton) {
                    resetButton.click(); // ×œ×•×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×”× ×™×§×•×™ ×©×œ Google Translate
                }
            }
        }

        // ×˜×¢×™× ×ª ×”×©×¤×” ×©× ×‘×—×¨×” ×× ×§×™×™××ª ×‘-LocalStorage ××• ×œ×¤×™ ×–×™×”×•×™ ××•×˜×•××˜×™
        window.onload = function () {
            var selectedLang = localStorage.getItem('selectedLanguage');
            if (!selectedLang) {
                selectedLang = detectBrowserLanguage();
                if (selectedLang !== 'he') {
                    localStorage.setItem('selectedLanguage', selectedLang); // ×©××™×¨×ª ×©×¤×” ×–×•×”×ª×”
                }
            }

            if (selectedLang && selectedLang !== 'he') {
                setTimeout(function () {
                    setLanguage(selectedLang);
                }, 1000);
                document.getElementById('languageOverlay').style.display = 'none'; // ×”×¡×ª×¨×ª ×—×œ×•×Ÿ ×”×©×¤×”
                document.getElementById('translate-icon').style.display = 'block'; // ×”×¦×’×ª ××™×™×§×•×Ÿ ×”×ª×¨×’×•×
            }
        };

        // ×›×¤×ª×•×¨ ××™×©×•×¨ ×©×¤×”
        document.getElementById('confirm-language').onclick = function () {
            var selectedLang = document.getElementById('language-select').value;
            saveLanguageSelection(selectedLang);
            if (selectedLang === 'he') {
                resetToHebrew(); // ×—×–×¨×” ×œ×¢×‘×¨×™×ª
            } else {
                setTimeout(function () {
                    setLanguage(selectedLang);
                }, 500); // ×”×—×œ×¤×ª ×”×©×¤×”
            }
            document.getElementById('languageOverlay').style.display = 'none'; // ×”×¡×ª×¨×ª ×—×œ×•×Ÿ
            document.getElementById('translate-icon').style.display = 'block'; // ×”×¦×’×ª ××™×™×§×•×Ÿ
        };

        // ××™×™×§×•×Ÿ ×œ×—×™×¦×” ×œ×‘×—×™×¨×ª ×©×¤×” ××—×“×©
        document.getElementById('translate-icon').onclick = function () {
            document.getElementById('languageOverlay').style.display = 'flex'; // ×”×¦×’×ª ×”×—×œ×•×Ÿ ××—×“×©
        };
    </script>
</body>

</html>